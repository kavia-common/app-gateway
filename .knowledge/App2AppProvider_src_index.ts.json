{"is_source_file": true, "format": "TypeScript", "description": "This file defines the App2AppProvider class, which manages JSON-RPC handlers for provider registration, invocation, response handling, error handling, and connection management within an application gateway context. It interfaces with provider and correlation registry classes, and facilitates communication through an AppGatewayClient.", "external_files": ["./types", "./providerRegistry", "./correlationStore", "./appGatewayClient"], "external_methods": ["jsonRpcError", "isNonEmptyString"], "published": ["App2AppProvider"], "classes": [{"name": "App2AppProvider", "description": "Manages JSON-RPC provider operations, including registration, invocation, response/error handling, and connection cleanup."}], "methods": [{"name": "registerProvider", "description": "Registers or unregisters a provider capability based on input parameters."}, {"name": "invokeProvider", "description": "Creates a correlation for a provider request and returns its ID."}, {"name": "handleProviderResponse", "description": "Handles provider responses by forwarding results back to the original consumer."}, {"name": "handleProviderError", "description": "Handles provider error responses by forwarding error details to the original consumer."}, {"name": "onConnectionDetached", "description": "Cleans up state associated with a disconnected connection."}, {"name": "function isNonEmptyString(v: unknown): v is string { isNonEmptyString", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function jsonRpcError(code: number, message: string): Error { jsonRpcError", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function validateContext(context?: RequestContext): asserts context is RequestContext { validateContext", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["this.gateway.respond", "this.providers.register", "this.providers.unregister", "this.providers.find", "this.correlations.create", "this.correlations.findAndErase", "this.correlations.cleanupByConnection"], "search-terms": ["App2AppProvider", "JSON-RPC handler", "provider registration", "correlation management", "app gateway client", "providerRegistry", "correlationStore", "handleProviderResponse", "handleProviderError"], "state": 2, "file_id": 8, "knowledge_revision": 17, "git_revision": "", "ctags": [{"_type": "tag", "name": "App2AppProvider", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^export class App2AppProvider {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "appId", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^      appId: params.context.appId,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "capability", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^      capability: params.capability,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "capability", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^    const { context, register, capability } = params;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "connectionId", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^      connectionId: params.context.connectionId,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "consumerCtx", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^    const consumerCtx: ConsumerContext = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^    const { context, register, capability } = params;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "correlationId", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^    const correlationId = this.correlations.create(consumerCtx);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^      createdAt: Date.now()$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "ctx", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^    const ctx = this.correlations.findAndErase(params.payload.correlationId);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^  const err = new Error(message);$/", "language": "TypeScript", "kind": "constant", "scope": "jsonRpcError", "scopeKind": "function"}, {"_type": "tag", "name": "isNonEmptyString", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^function isNonEmptyString(v: unknown): v is string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "jsonRpcError", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^function jsonRpcError(code: number, message: string): Error {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^    const provider = this.providers.find(params.capability);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "providers", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^  private readonly providers: ProviderRegistry = new ProviderRegistry();$/", "language": "TypeScript", "kind": "property", "scope": "App2AppProvider", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^    const { context, register, capability } = params;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "validateContext", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/src/index.ts", "pattern": "/^function validateContext(context?: RequestContext): asserts context is RequestContext {$/", "language": "TypeScript", "kind": "function"}], "hash": "17b2936c393a97b2a2a93126da5b7896", "format-version": 4, "code-base-name": "app-gateway", "filename": "App2AppProvider/src/index.ts", "fields": [{"name": "private readonly providers: ProviderRegistry = new ProviderRegistry();", "scope": "App2AppProvider", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"17": ""}]}