{"is_source_file": true, "format": "C++ header", "description": "This header file declares the class App2AppProviderImplementation, which implements the Exchange::IApp2AppProvider interface. It contains data members, such as provider registry, reverse index, and correlation mappings, and methods for registering providers, invoking providers, handling responses and errors, and managing connections. It also includes internal structures for provider entries and consumer contexts.", "external_files": ["<com/IUnknown.h>", "<core/Time.h>", "<core/JSON.h>", "<plugins/IShell.h>", "<interfaces/json/Module.h>", "IApp2AppProvider.h", "IAppGateway.h", "UtilsLogging.h"], "external_methods": ["Exchange::IApp2AppProvider::RegisterProvider", "Exchange::IApp2AppProvider::InvokeProvider", "Exchange::IApp2AppProvider::HandleProviderResponse", "Exchange::IApp2AppProvider::HandleProviderError", "PluginHost::IShell*", "Core::hresult", "Core::Time"], "published": ["Exchange::IApp2AppProvider"], "classes": [{"name": "App2AppProviderImplementation", "description": "Concrete implementation of Exchange::IApp2AppProvider business logic, managing provider registry, reverse index, and correlations, and facilitating communication with the app gateway."}], "methods": [{"name": "RegisterProvider", "description": "Registers or unregisters a provider capability for a given context."}, {"name": "InvokeProvider", "description": "Invokes the provider with the specified capability."}, {"name": "HandleProviderResponse", "description": "Handles responses from providers."}, {"name": "HandleProviderError", "description": "Handles error responses from providers."}, {"name": "CleanupByConnection", "description": "Removes all providers and correlations associated with a specific connection ID."}], "calls": ["Exchange::IAppGateway", "Core::Time", "ParseConnectionId", "GenerateCorrelationId", "EnsureGateway", "HandleProviderResultLike_"], "search-terms": ["App2AppProviderImplementation", "RegisterProvider", "HandleProviderResponse", "CorrelationId", "CapabilityRegistry"], "state": 2, "file_id": 507, "knowledge_revision": 1025, "git_revision": "cd18003207fcdcc57a9ba3bd1ecc1853ac960e1d", "revision_history": [{"1021": ""}, {"1025": "cd18003207fcdcc57a9ba3bd1ecc1853ac960e1d"}], "ctags": [{"_type": "tag", "name": "App2AppProviderImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^class App2AppProviderImplementation : public Exchange::IApp2AppProvider {$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "ConsumerContext", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    struct ConsumerContext {$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^namespace Plugin {$/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "ProviderEntry", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    struct ProviderEntry {$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_capabilitiesByConnection", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    std::unordered_map<uint32_t, std::unordered_set<std::string>> _capabilitiesByConnection;$/", "language": "C++", "typeref": "typename:std::unordered_map<uint32_t,std::unordered_set<std::string>>", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_capabilityToProvider", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    std::unordered_map<std::string, ProviderEntry> _capabilityToProvider;$/", "language": "C++", "typeref": "typename:std::unordered_map<std::string,ProviderEntry>", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_corrCounter", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    std::atomic<uint64_t> _corrCounter {0};$/", "language": "C++", "typeref": "typename:std::atomic<uint64_t>", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_correlations", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    std::unordered_map<std::string, ConsumerContext> _correlations;$/", "language": "C++", "typeref": "typename:std::unordered_map<std::string,ConsumerContext>", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_gateway", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    Exchange::IAppGateway* _gateway { nullptr }; \\/\\/ held COM pointer$/", "language": "C++", "typeref": "typename:Exchange::IAppGateway *", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_lock", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    mutable std::mutex _lock;$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_refCount", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    mutable std::atomic<uint32_t> _refCount {1};$/", "language": "C++", "typeref": "typename:std::atomic<uint32_t>", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_service", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^    PluginHost::IShell* _service { nullptr };$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "appId", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^        std::string appId;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "appId", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^        std::string appId;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ProviderEntry", "scopeKind": "struct"}, {"_type": "tag", "name": "capability", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^        std::string capability;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "connectionId", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^        uint32_t connectionId { 0 };$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "connectionId", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^        uint32_t connectionId { 0 };$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ProviderEntry", "scopeKind": "struct"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^        Core::Time createdAt;$/", "language": "C++", "typeref": "typename:Core::Time", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "registeredAt", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^        Core::Time registeredAt;$/", "language": "C++", "typeref": "typename:Core::Time", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ProviderEntry", "scopeKind": "struct"}, {"_type": "tag", "name": "requestId", "path": "/home/kavia/workspace/code-generation/app-gateway/App2AppProvider/include/App2AppProviderImplementation.h", "pattern": "/^        int requestId { 0 };$/", "language": "C++", "typeref": "typename:int", "kind": "member", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct"}], "hash": "5b87d01bbf5a6c0e37c4909820b8d007", "format-version": 4, "code-base-name": "app-gateway", "filename": "App2AppProvider/include/App2AppProviderImplementation.h", "fields": [{"name": "std::unordered_map<uint32_t,std::unordered_set<std::string>> _capabilitiesByConnection", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::unordered_map<std::string,ProviderEntry> _capabilityToProvider", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::atomic<uint64_t> _corrCounter", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::unordered_map<std::string,ConsumerContext> _correlations", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Exchange::IAppGateway * _gateway", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::mutex _lock", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::atomic<uint32_t> _refCount", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PluginHost::IShell * _service", "scope": "WPEFramework::Plugin::App2AppProviderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string appId", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::string capability", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t connectionId", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::Time createdAt", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::Time registeredAt", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ProviderEntry", "scopeKind": "struct", "description": "unavailable"}, {"name": "int requestId", "scope": "WPEFramework::Plugin::App2AppProviderImplementation::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}]}